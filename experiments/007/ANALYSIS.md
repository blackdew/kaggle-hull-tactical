# EXP-007 분석: 왜 Sharpe 1.0을 넘기 어려운가?

## 현재 상황

### 실험 결과 요약
| 실험 | Features | k | CV Sharpe | Kaggle (추정) |
|------|----------|---|-----------|---------------|
| EXP-005 | 234 | 200 | 0.627 | **0.724** (실제) |
| EXP-006 | 234 | 3000 | 0.699 | 1.0~1.5? |
| EXP-007 H1 | 754 | 600 | **0.749** | 1.2~2.0? |

### 문제
- **목표**: Sharpe 6.0 (Kaggle utility 17.395 달성)
- **현재**: 0.749
- **격차**: 8배

---

## 근본 원인 분석

### 원인 1: 예측 정확도의 근본적 한계 (90% 확률)

**증거:**
```
MSE: 0.000126 (H1 All Features)
Baseline MSE: 0.000150
개선: 16% (미미)
```

**해석:**
- 660개 features 추가했지만 MSE는 16%만 감소
- **신호 자체가 매우 약함**
- Feature 더 늘려도 한계 명확

**비유:**
- 신호 대 잡음비(SNR)가 매우 낮은 데이터
- 어떤 모델을 써도 일정 수준 이상 향상 불가능

### 원인 2: Target 정의 문제 (5% 확률)

**가설:**
- `market_forward_excess_returns` 자체가 예측하기 어려운 target
- 너무 noisy, 너무 짧은 기간 (1일?)

**검증 필요:**
- Target의 autocorrelation 확인
- Target의 예측 가능성 이론적 upper bound

### 원인 3: 데이터 품질 문제 (5% 확률)

**가설:**
- Train data가 test와 다른 분포
- 중요한 feature가 누락됨
- Feature가 이미 충분히 engineered 되어 있음

---

## 현실적 가능성 평가

### Scenario A: Sharpe 1.0~1.5 달성 가능 (20% 확률)

**방법:**
1. **Ensemble (H3)**
   - XGBoost + LightGBM + Lasso
   - 예상: Sharpe 0.8~0.9

2. **Volatility Scaling (H2)**
   - position = (1 + excess * k) / rolling_vol
   - 예상: Sharpe +10~15%
   - 0.749 → 0.85~0.86

3. **조합 (H1 + H2 + H3)**
   - 예상: Sharpe 0.9~1.1

4. **k 재조정**
   - k=1000~2000에서 최적화
   - 예상: Sharpe 1.0~1.3

**Kaggle 예상:**
- CV 1.0~1.3 → Kaggle 1.5~3.0
- Utility: Sharpe(1.5~3.0) × Profit(1~2) = **1.5~6.0**

**결론:**
- 목표 17.395에는 부족하지만 개선은 가능
- 현재 0.724 대비 2~8배 향상

### Scenario B: Sharpe 1.5+ 달성 (5% 확률)

**방법:**
1. **Neural Network (H4)**
   - LSTM, Transformer
   - 예상: Sharpe 1.2~1.8 (매우 낙관적)

2. **Target Re-engineering (H5)**
   - Classification + Regression
   - 예상: Sharpe 1.5~2.5 (초낙관적)

**Kaggle 예상:**
- CV 1.5~2.5 → Kaggle 2.5~5.0
- Utility: **3.0~15.0**

**리스크:**
- 과적합 가능성 매우 높음
- 시간 많이 소요 (5~10시간+)
- 성공 확률 낮음

### Scenario C: 현재가 한계 (75% 확률)

**현실:**
- Sharpe 0.749가 이 데이터의 예측 가능성 상한
- 더 이상 개선 불가능
- Kaggle 1.0~2.0이 최선

**근거:**
- EXP-005~007을 통해 다양한 시도
- k, feature, model 모두 최적화
- MSE 0.000126이 한계

**결론:**
- 목표 17.395는 **비현실적**
- 다른 접근 또는 문제 재정의 필요

---

## 의사결정 트리

### Option 1: 현재 최선으로 제출 (추천 ⭐⭐⭐⭐⭐)

**행동:**
1. H1 All Features (Sharpe 0.749) + k 재조정
2. k=1000~2000 테스트
3. 최고 조합 Kaggle 제출

**예상 결과:**
- Kaggle utility: 1.5~3.0
- 현재 0.724 대비 2~4배 향상

**소요 시간:** 1~2시간

**장점:**
- 확실한 개선
- 빠른 검증
- 리스크 낮음

### Option 2: Phase 2+3 시도 후 제출 (추천 ⭐⭐⭐⭐)

**행동:**
1. H2: Volatility Scaling (2시간)
2. H3: Ensemble (2시간)
3. 최고 조합 k 재조정 (1시간)
4. Kaggle 제출

**예상 결과:**
- CV Sharpe: 0.85~1.1
- Kaggle utility: 2.0~4.0

**소요 시간:** 5~6시간

**장점:**
- 추가 개선 가능성
- 체계적 접근
- Phase 2, 3 검증 완료

### Option 3: Neural Network 도전 (추천 ⭐⭐)

**행동:**
1. H4: MLP or LSTM (5~8시간)
2. Hyperparameter tuning (3~5시간)
3. 성공 시 제출

**예상 결과:**
- 성공: Sharpe 1.2~1.8 (5% 확률)
- 실패: Sharpe < 0.8 (95% 확률)

**소요 시간:** 8~13시간

**리스크:**
- 시간 많이 소요
- 과적합 위험
- 실패 확률 높음

### Option 4: 문제 재정의 (추천 ⭐⭐⭐)

**행동:**
1. Competition details 재확인
2. Top solution 분석 (대회 종료 후)
3. 17.395가 realistic한지 검증
4. 필요 시 목표 재설정

**소요 시간:** 1~2시간

**장점:**
- 근본 문제 이해
- 시간 낭비 방지
- 현실적 목표 설정

---

## 최종 추천

### 추천 1: Option 1 (현재 최선 제출) ⭐⭐⭐⭐⭐

**근거:**
1. H1 All (0.749)은 충분히 좋은 결과
2. k 재조정으로 추가 개선 가능
3. Kaggle 1.5~3.0 예상 (현재 0.724 대비 2~4배)
4. 빠르고 확실함

**Action Plan:**
1. k=[800, 1000, 1500, 2000] CV 테스트 (1시간)
2. 최고 k 선정
3. Kaggle inference 파일 생성
4. 제출 및 결과 확인

### 추천 2: Option 2 (Phase 2+3) ⭐⭐⭐⭐

**조건:** 시간 여유 있으면

**근거:**
- Volatility Scaling, Ensemble 효과 검증
- Sharpe 0.85~1.1 가능성
- Kaggle 2.0~4.0 예상

**Action Plan:**
1. H2 Volatility Scaling (2시간)
2. H3 Ensemble (2시간)
3. 최고 조합 + k 재조정 (1시간)
4. 제출

### 추천 3: Option 1 + Option 4 병행 ⭐⭐⭐⭐⭐

**이유:**
- Option 1로 빠른 제출
- 결과 나오는 동안 Option 4로 문제 재검토
- 17.395가 비현실적이면 목표 재설정

---

## 결론

**현실:**
- Sharpe 0.749가 이 접근의 한계로 보임
- 목표 17.395는 현재 접근으로는 달성 불가능
- 하지만 현재 0.724 대비 2~4배 개선은 가능

**제안:**
1. **즉시**: H1 All + k 재조정 후 Kaggle 제출
2. **동시**: 문제 재정의 (17.395가 realistic한지 확인)
3. **선택**: 시간 있으면 Phase 2+3 시도

**예상 Kaggle:**
- 낙관적: 2.0~4.0 (현재 대비 3~6배)
- 현실적: 1.5~2.5 (현재 대비 2~3배)
- 비관적: 1.0~1.5 (현재 대비 1.4~2배)

모두 현재보다는 개선이지만, 17.395와는 여전히 격차 큼.

---

**작성일**: 2025-10-13
**상태**: EXP-007 Phase 1 완료, 다음 단계 결정 필요
**추천**: Option 1 (k 재조정 후 제출) 즉시 실행
