# Hull Tactical Market Prediction - 세계 최고 수준 실행 계획

## 프로젝트 개요
**포지션 사이징**: S&P 500에 대한 일별 자금 배분 비율(0~2)을 예측하여 효율적 시장 가설(EMH)에 도전하는 투자 전략 개발

**목표**: 120% 변동성 제약 하에서 Modified Sharpe Ratio 최적화
**기간**: 제출 2025년 12월 15일, 예측 단계 2025년 12월~2026년 6월
**상금**: 총 $100,000 (1등 $50,000, 2등 $25,000, 3등 $10,000)

## 데이터 개요
- **훈련 데이터**: 8,990개 샘플, 98개 피처 (약 35년 일별 데이터)
- **타겟**: 포지션 사이징 (S&P 500 자금 배분 비율 0~2)
- **제약 조건**: 120% 변동성 상한선, Modified Sharpe Ratio 최적화
- **주요 도전**: 최대 77% 결측치, 시계열 특성, 실시간 리스크 관리

## Phase 0: 기초 검증 및 데이터 파악 (1주) ⚠️ **신규 추가**

### 0.1 경진대회 핵심 요구사항 파악 ✅ **완료**
- **포지션 사이징**: S&P 500 자금 배분 비율 (0~2) 예측 확인
- **120% 변동성 제약**: 시장 변동성 대비 1.2배 상한 확인
- **Modified Sharpe Ratio**: 변동성 제약 하에서 초과 성과 평가
- **실시간 평가**: kaggle_evaluation API 기반 배치 처리
- **EMH 도전**: 효율적 시장 가설 반박 목표

### 0.2 기존 98개 피처 완전한 이해 (포지션 사이징 관점)
- **피처별 의미**: D/E/I/M/P/S/V 그룹별 포지션 사이징에 미치는 영향 분석
- **변동성 기여도**: 각 피처가 120% 변동성 제약에 미치는 영향 파악
- **포지션 예측력**: 0~2 범위 자금 배분에 유의미한 피처 식별
- **베이스라인 성능**: 간단한 모델로 현재 98개 피처의 포지션 사이징 성능 측정

## Phase 1: 고급 데이터 분석 및 도메인 이해 (2-3주)

### 1.1 심화 EDA & 시계열 분석 (우선순위 조정)
- **🔥 1순위**: 기존 98개 피처의 Modified Sharpe Ratio 기여도 분석
- **🔥 1순위**: 결측치 패턴이 성능에 미치는 실제 영향 측정
- **2순위**: 체제 변화 탐지 (Hidden Markov Model로 시장 체제 식별)
- **3순위**: 구조적 단절 분석 (Chow test, CUSUM test로 데이터 안정성 검증)
- **3순위**: 상관관계 시간 변화 (Rolling correlation으로 피처 간 관계 변화 추적)
- **3순위**: 계절성/주기성 분석 (STL decomposition, FFT로 숨겨진 패턴 발굴)

### 1.2 결측치 고급 처리 전략
- **MICE (Multiple Imputation)**: 조건부 분포 기반 다중 대치
- **Matrix Factorization**: SVD, NMF로 잠재 구조 활용한 보간
- **Forward-backward filling**: 시계열 특성 고려한 방향성 보간
- **Domain-specific imputation**: 금융 변수별 맞춤형 처리

### 1.3 금융 도메인 피처 엔지니어링 (신중한 접근)
- **⚠️ 경고**: 98개 → 147개 피처 증가는 오버피팅 위험, 성능 향상 검증 후 진행
- **1단계**: 기존 98개 피처 조합/변환 (상호작용, 비율, 차분 등)
- **2단계**: 검증된 경우에만 새 피처 추가
  - **기술적 지표**: RSI, MACD, Bollinger Bands (핵심 지표만)
  - **변동성 클러스터링**: GARCH 모델링 (Modified Sharpe Ratio 직접 연관)
  - **리스크 프리미엄**: VIX 기반 지표 (리스크 조정 수익률 관련)
- **3단계**: 피처 선택 강화 (Mutual Information, SHAP 기반)

## Phase 2: 고급 모델링 전략 (3-4주)

### 2.1 시계열 특화 베이스라인
- **VAR/VECM**: 다변량 시계열 모델로 경제 관계 포착
- **State Space Models**: Kalman Filter로 동적 파라미터 추적
- **Regime-Switching Models**: Markov-Switching으로 체제 변화 대응

### 2.2 머신러닝 앙상블 전략
- **Temporal Ensembling**: 시간 가중 평균으로 최근 패턴 강조
- **Multi-horizon Models**: 다양한 예측 구간 모델 결합
- **Feature Group Ensembles**: D/E/I/M/P/S/V 그룹별 전문화 모델
- **Cross-validation Ensembles**: TimeSeriesSplit 기반 다중 폴드 결합

### 2.3 딥러닝 아키텍처
- **Transformer with Attention**: 장기 의존성 포착
- **WaveNet**: Dilated convolution으로 다중 시간 스케일
- **Neural ODE**: 연속시간 동역학 모델링
- **Graph Neural Networks**: 경제 변수 간 관계 네트워크 모델링

## Phase 3: 포지션 사이징 및 120% 변동성 제약 최적화 (2주)

### 3.1 변동성 제약 포지션 사이징
- **120% 변동성 제약 구현**: 시장 변동성 대비 1.2배 상한선 적용
- **동적 포지션 사이징**: 변동성 예측 기반 0~2 범위 자금 배분
- **Modified Sharpe Ratio 최적화**: 변동성 제약 하에서 리스크 조정 수익률 극대화
- **레버리지 관리**: 0~2 범위 내 최적 레버리지 계산

### 3.2 리스크 관리 중심 손실함수
- **변동성 제약 손실함수**: 120% 제약 위반 시 페널티 적용
- **Modified Sharpe Loss**: 직접적 MSR 최적화 손실함수
- **포지션 사이징 MSE**: 0~2 범위 제약 고려한 평균제곱오차
- **리스크 가중 손실**: 변동성 초과 시 지수적 페널티

## Phase 4: 고급 백테스팅 및 검증 (2주)

### 4.1 금융 특화 검증 전략 ⚠️ **강화**
- **Purged Cross-Validation**: 금융 시계열 특화, 정보 누수 방지
- **Embargo Period**: 예측-실제 사이 시간 간격으로 누수 방지
- **Walk-Forward 분석**:
  - **Expanding Window**: 점진적 데이터 확장 검증
  - **Rolling Window**: 고정 길이 rolling 검증
  - **Anchored Walk-Forward**: 기준점 고정 전진 분석

### 4.2 모델 안정성 검증
- **Bootstrap Validation**: 리샘플링 기반 신뢰구간
- **Stress Testing**: 극단 시장 상황 시뮬레이션 (2008, 2020 등)
- **Out-of-Sample Decay**: 시간 경과에 따른 성능 감소 분석
- **Transaction Cost Impact**: 실제 거래비용 고려한 성능 평가

## Phase 5: 메타 모델링 및 최종 최적화 (1-2주)

### 5.1 스태킹 전략
- **Level-1 Models**: 개별 모델들의 예측값
- **Level-2 Meta-Model**: 시간 변화하는 가중치 학습
- **Dynamic Model Selection**: 시장 상황별 최적 모델 자동 선택

### 5.2 온라인 학습 및 적응
- **Incremental Learning**: 새 데이터 도착 시 모델 업데이트
- **Concept Drift Detection**: 모델 성능 저하 조기 감지
- **Automated Retraining**: 성능 기준 기반 자동 재학습

## 핵심 차별화 요소

1. **포지션 사이징 특화**: 수익률 예측이 아닌 0~2 범위 자금 배분 최적화
2. **120% 변동성 제약**: 시장 변동성 대비 1.2배 상한선 엄격 준수
3. **EMH 도전 전략**: 효율적 시장 가설 반박을 위한 실증적 접근
4. **실시간 리스크 관리**: 변동성 제약 하에서 Modified Sharpe Ratio 극대화
5. **라이브 운용 준비**: 실제 시장에서 6개월 운용 가능한 견고한 전략

## 성공 기준
- **1차 목표**: 120% 변동성 제약 준수하면서 Modified Sharpe Ratio 상위 10% 달성
- **2차 목표**: 0~2 범위 포지션 사이징으로 안정적인 초과 성과 창출
- **3차 목표**: 실제 시장 운용에서 6개월간 일관된 성능 유지
- **최종 목표**: EMH 반박을 위한 실증적 증거 제시

## ⚠️ 실행 원칙 및 주의사항

### 핵심 실행 원칙:
1. **단순함 우선**: 복잡한 모델보다 견고한 베이스라인부터
2. **검증 중심**: 모든 변경사항의 성능 향상을 엄격히 검증
3. **리스크 우선**: 수익률보다 리스크 관리에 집중
4. **점진적 개선**: 급진적 변화보다 단계적 향상

### 실행 전 필수 확인:
- [x] **포지션 사이징**: S&P 500 자금 배분 비율 (0~2) 예측 확인
- [x] **120% 변동성 제약**: 시장 변동성 대비 1.2배 상한 확인
- [x] **Modified Sharpe Ratio**: 변동성 제약 하 초과 성과 평가 방식 확인
- [x] **실시간 평가**: kaggle_evaluation API 기반 배치 처리 확인
- [x] **EMH 도전**: 효율적 시장 가설 반박 목표 확인

이 계획은 단순한 예측 정확도가 아닌 **120% 변동성 제약 하에서 실제 투자 성과**를 극대화하는 것에 초점을 맞춘 전략입니다.