# Hull Tactical 경쟁 문서 — 비판적 리뷰 (CODEX)

## 요약
최근 업데이트로 문서의 사실성·규정 정합성이 크게 개선되었습니다. 특히 “포지션 사이징(0~2)”, “120% 변동성 제약”, “API 기반 제출/런타임 제약/타임라인”이 명시되었습니다. 다만 메트릭의 공식 수식/링크, 검증 설계의 구체 수치, 엔드투엔드 실행 경로와 산출물 존재 증빙 등 여전히 보완할 핵심 지점이 남아 있습니다.

## 강점
- 포지션 사이징(0~2), 120% 변동성 상한, 제출·런타임 제약, 타임라인 등 핵심 규정 반영.
- 누수 방지(purged CV, embargo)와 시계열 인지 검증을 지속 강조.
- TODO-001가 “사실 우선/규정 준수/점진 개선”으로 슬림화되고, 실행 우선순위가 선명해짐.

## 개선 사항(관찰됨)
- PRD: 포지션 사이징(0~2), 120% 변동성 제약, 제출·런타임 제약, 상금/타임라인이 명시됨. 데이터 스키마/피처 그룹과 테스트 보조 피처(`is_scored`, `lagged_*`) 반영.
- PLAN: 목표를 포지션 사이징/변동성 제약 중심으로 재정렬. 실행 원칙과 체크리스트로 규정 정합성 확인.
- TODO-001: “추정 제거”, “API 통합 분석”, “베이스라인/메트릭/검증 파이프라인” 등 즉시 실행 과제가 명확해짐. 고난도 모델/분석은 연기 처리.

## 남은 문제와 위험
- 메트릭 정본 부재: “Sharpe 변형/패널티” 설명은 있으나 공식 평가 코드/수식 인용과 링크가 없음. 1.2× 캡의 발동 조건·언더퍼폼 패널티 로직을 문서에 확정해야 함.
- 제출 매핑 정책: PRD가 여전히 `market_forward_excess_returns` 예측을 기술하는 부분이 있어, 모델 출력→`prediction`[0,2]로의 매핑 정책(임계값/스케일/변동성 타깃팅/클리핑)을 한곳에 명확히 정리할 필요.
- 검증 설계 구체성: 날짜 기반 분할 범위, 윈도 크기, 엠바고 길이, 워크포워드 설정, 로컬 메트릭 vs 게이트웨이 점수 동형성 기준이 수치로 고정되지 않음.
- 문서 내부 정합성: PRD의 학습 데이터 기간 표기(예: date_id 0~8989)와 테스트 데이터 범위(8980~8989)가 중첩/충돌합니다. 학습/테스트 경계 정의를 일관되게 고정해야 합니다.
- 용어/대상 혼용: PRD가 “초과수익 예측”과 “포지션 사이징(0~2)”을 혼용 기술. “내부적으로 수익률을 예측하되 제출은 포지션” 등으로 관계를 명시하고, 기본 용어를 용어집으로 고정 필요.
- 수치 부재: 변동성 제약, 언더퍼폼 패널티, 수락 기준 등 핵심 항목에 구체 수치/예시가 부족합니다.
- 실행 제약 반영 위치: 런타임/인터넷 제한, 제출 형식 등의 제약이 PRD에는 있으나 PLAN/TODO에 일관되게 반영되어 있지 않습니다(검증 단계별 체크 필요).

## 권고 사항
- 규정 정본화: 공식 평가 코드/수식을 인용·링크하고, 간단 수치 예시 포함. 변동성/언더퍼폼 패널티 발동 조건을 표로 요약.
- 제출 매핑 정책 명문화: 신호→익스포저 정책(임계값/스케일/변동성 타깃팅/클리핑)을 PRD “제출 형식” 섹션에 구체 서술. 간단 예시 포함.
- 데이터 사실 고정: 스키마 검증 스크립트로 열/행/칼럼·타깃/보조열을 기록하고 CI에서 체크. 학습/테스트 분리 확인.
- 검증 청사진 수치화: 기간 경계, 윈도 크기, 엠바고 길이, 워크포워드 설정, 로컬↔호스트 점수 허용 오차(예: ±1e-6)를 명시.
- 산출물 정합성: TODO의 산출물(`kaggle_baseline_model.py`)을 실제 추가하거나 문서에서 제거/명칭 일치. 리드미/CLAUDE.md에서 실행 명령과 링크 연결.
- 실행 플레이북: docs/에 “RUNBOOK.md” 또는 PLAN 말미에 엔드투엔드 명령(uv sync → jupyter/CLI → 게이트웨이 로컬 테스트 → 제출 생성)과 데이터 경로 폴백(`/kaggle/input`→`./data`) 명시.
- 정량 게이트: 최근 K개 워크포워드 폴드에서 로컬 메트릭 ≥ X, 전략 변동성 ≤ 1.2× 시장, 언더퍼폼 기간 비율 ≤ Y%로 단계 종료 기준 고정.

## 즉시 수정 체크리스트
- PRD: 공식 메트릭 링크/수식/예시 추가, 신호→익스포저 정책 구체화, date_id 경계(학습/테스트) 일관 표기.
- PLAN: 검증 파이프라인의 수치 파라미터(윈도/엠바고/워크포워드) 명시, 런타임/인터넷 제약을 단계별 체크로 반영.
- TODO-001: 수락 기준을 수치로 명기(예: 점수 허용 오차, 변동성 상한 준수 여부), 문서 간 참조 링크(PRD/PLAN 섹션 앵커) 추가.
